<template>
  <require from="./import.route.css"></require>
  <require from="resources/elements/entry/entry"></require>
  <textarea class="import-input" value.bind="csv"></textarea>
  <button click.trigger="parse()">parse</button>
  <button click.trigger="import()">import</button>
  <div if.bind="moodsToMap.length > 0">
    <h2>Moods</h2>
    <span
      repeat.for="mood of moodsToMap"
      class="mood-mappings"
      click.trigger="openMoodPrompt(moodMappings[mood], mood)"
    >
      ${mood} ➡️
      <span if.bind="moodMappings[mood]">
        ${getMood(moodMappings[mood]).emoji}
      </span>
      <span else>⁉️</span>
    </span>
  </div>
  <div if.bind="activitiesToMap.length > 0">
    <h2>Activities</h2>
    <span
      repeat.for="activity of activitiesToMap"
      class="activity-mappings"
      click.trigger="openActivityPrompt(activitiesToMap[activity], activity)"
    >
      ${activity} ➡️
      <span if.bind="activityMappings[activity]">
        ${getActivity(activityMappings[activity]).emoji}
      </span>
      <span else>⁉️</span>
    </span>
  </div>
  <entry class="import-entry" repeat.for="e of entries" entry.bind="e"></entry>
</template>
