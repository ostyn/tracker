<template>
  <require from="./activity-grid.css"></require>
  <require from="resources/elements/activity/activity"></require>
  <div class="grid-controls">
    <span
      if.bind="!search"
      class="grid-button"
      click.trigger="search = !search"
    >
      <feather-icon name="search"></feather-icon>
      ${searchTerm?'"'+searchTerm+'"':""}
    </span>
    <input
      class="search-box"
      value.bind="searchTerm"
      blur.trigger="search = false"
      if.bind="search"
      placeholder="search"
      focus.bind="search"
    />
    <span class="grid-button" click.trigger="toggleShowArchived()">
      <feather-icon if.bind="filterArchived" name="minimize"></feather-icon>
      <feather-icon else name="maximize"></feather-icon>
    </span>
    <span class="grid-button" click.trigger="toggleGroup()">
      <feather-icon if.bind="groupActivities" name="server"></feather-icon>
      <feather-icon else name="align-justify"></feather-icon>
    </span>
  </div>
  <article repeat.for="header of getSortedHeaders(categoryToActivityList)">
    <h2 class="group-header">${header}</h2>
    <activity
      repeat.for="activity of categoryToActivityList.get(header)"
      click.trigger="onActivityClick({event: $event, activity: activity})"
      long-click.trigger="onActivityLongClick({event: $event, activity: activity})"
      id.bind="activity.id"
      class.bind="`clickable ${activity.isArchived ? 'disabled':''}`"
    ></activity>
  </article>
  <article if.bind="uncategorized.length > 0">
    <activity
      repeat.for="activity of uncategorized"
      click.trigger="onActivityClick({event: $event, activity: activity})"
      long-click.trigger="onActivityLongClick({event: $event, activity: activity})"
      id.bind="activity.id"
      class.bind="`clickable ${activity.isArchived ? 'disabled':''}`"
    ></activity>
  </article>
</template>
