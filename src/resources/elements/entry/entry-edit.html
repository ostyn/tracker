<template>
  <require from="./activity-grid"></require>
  <require from="resources/elements/activity/activity"></require>
  <div class="p-2">
    <activity-grid
      activities.bind="activities"
      on-activity-click.call="addActivity(activity)"
    ></activity-grid>
  </div>
  <footer>
    <div>
      <activity
        repeat.for="[id, detail] of workingCopy.activities"
        class="cursor-pointer"
        click.trigger="removeActivity(id)"
        id.bind="id"
        detail.bind="detail"
      ></activity>
    </div>
    <div click.trigger="openTextPrompt()">
      <span>📝</span>
      <span>${workingCopy.note || "enter note here..." }</span>
    </div>
    <span click.trigger="openMoodPrompt()">
      ${getMood(workingCopy.mood).emoji}
    </span>
    <input type="date" value.bind="workingCopy.date" max.bind="date" name="" />
    <button
      disabled.bind="workingCopy.mood === undefined"
      click.trigger="submitEntry()"
    >
      submit
    </button>
    <button if.bind="entry.id" click.trigger="deleteEntry()">delete</button>
  </footer>
</template>
