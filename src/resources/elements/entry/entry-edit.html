<template>
  <h4>how are you feeling?</h4>
  <div class="moods">
    <label
      class.bind="m.id === entry.mood ? 'activeMood' : 'inactiveMood'"
      repeat.for="m of moods"
    >
      ${m.emoji}
      <input
        show.bind="false"
        type="radio"
        name="moodSelector"
        model.bind="m.id"
        checked.bind="entry.mood"
      />
    </label>
  </div>
  <h4>what did you do?</h4>
  <div
    repeat.for="activity of nonArchivedActivities"
    class="activityContainer cursor"
    click.trigger="addActivity(activity)"
  >
    <div class="activityEmoji">${activity.emoji}</div>
    <div class="activityName">${activity.name}</div>
  </div>
  <div>
    <textarea class="entryNoteEdit" value.bind="entry.note"></textarea>
    <div>${entry.note.length}/280</div>
  </div>
  <div if.bind="activities.length > 0">
    <div
      repeat.for="[id, detail] of entry.activities"
      class="activityContainer cursor"
      click.trigger="removeActivity(id)"
    >
      <div class="activityEmoji">${findActivity(id).emoji}</div>
      <div class="activityName">
        ${findActivity(id).name}
        <span class="badge" if.bind="detail>1">${detail}</span>
      </div>
      <div if.bind="findActivity(id).type ==='text'">
        <div
          click.trigger="removeTextItem(id, $index)"
          repeat.for="textItem of detail"
        >
          ${textItem}
        </div>
      </div>
    </div>
  </div>
  <h4>when was this?</h4>
  <input type="date" value.bind="entry.date" max.bind="date" name="" id="" />
  <br />
  <button
    disabled.bind="entry.mood === undefined"
    click.trigger="submitEntry()"
  >
    submit
  </button>
</template>
